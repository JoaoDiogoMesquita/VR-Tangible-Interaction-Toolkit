<!doctype html>
<html>
<head>
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@4.2.1/dist/aframe-event-set-component.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
    <script src="../shake_detector.js"></script>

</head>

<body>
<a-scene arjs>
    <a-entity id = 'env' environment="preset: goldmine;
                       dressing: mushrooms;
                       dressingAmount: 20;
                       dressingColor: orange;
                       dressingScale: 1"></a-entity>
    <a-light id="ambientLight" type="ambient" color="#BBB" > </a-light>

    <a-camera>
        <a-marker preset = 'hiro'  shake-detector = "switchInterval: 1000 ; minimumSwitchTimes: 2 ; minimumDistance: 0.3 ; eventTargets:#ambientLight; axis:y ; debug: true;">
            <a-box color="red" radius="0.5"></a-box>
        </a-marker>
    </a-camera>

</a-scene>

<script>
    let light = document.getElementById('ambientLight')
    light.addEventListener('event_shake', e=>{
        if(light.getAttribute('intensity') > 0){
            light.setAttribute('intensity', 0)
        }
        else{
            light.setAttribute('intensity', 1)
        }
    });
</script>
</body>
</html>

