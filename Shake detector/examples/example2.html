<!doctype html>
<html>
<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <title>Shake Example 2</title>
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@4.2.1/dist/aframe-event-set-component.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
    <script src="../shake_detector.js"></script>

</head>

<body>
<a-scene arjs= 'sourceType: video; sourceUrl: ../images/video_front_back.mp4;'>

    <a-entity id = 'env' environment="preset: goldmine;
                       dressing: mushrooms;
                       dressingAmount: 20;
                       dressingColor: orange;
                       dressingScale: 1">
    </a-entity>

    <a-marker preset = 'kanji'  mt-shake-detector = "switchInterval: 1000 ; minimumSwitchTimes: 2 ; minimumDistance: 0.2 ; eventTargets:#env; axis:z ; debug: true;">
        <a-box color="red" radius="0.5"></a-box>
    </a-marker>

</a-scene>

<script>
    let env = document.getElementById('env')

    env.addEventListener('event_shake', e=>{
        let env = document.getElementById('env')
        let envs = ['contact', 'egypt', 'checkerboard', 'forest', 'goaland', 'yavapai', 'goldmine', 'threetowers', 'poison', 'arches', 'tron', 'japan', 'dream', 'volcano', 'starry', 'osiris']
        let random_element = envs[Math.floor(Math.random() * envs.length)];
        env.setAttribute('environment', 'preset: ' + random_element );
    });
</script>
</body>
</html>

