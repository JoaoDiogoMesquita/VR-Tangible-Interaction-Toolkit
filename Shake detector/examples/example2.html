<!doctype html>
<html>
<head>
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@4.2.1/dist/aframe-event-set-component.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
    <script src="../shake_detector.js"></script>

</head>

<body>
<a-scene arjs>
    <a-entity id = 'env' environment="preset: goldmine;
                       dressing: mushrooms;
                       dressingAmount: 20;
                       dressingColor: orange;
                       dressingScale: 1"></a-entity>
    <a-camera>
    <a-light id="ambientLight" type="ambient" color="#BBB"> </a-light>

        <a-marker preset = 'hiro'  shake-detector = "switchInterval: 1000 ; minimumSwitchTimes: 2 ; minimumDistance: 0.3 ; eventTargets:#box; axis:y ; debug: true;">
            <a-box color="red" radius="0.5"></a-box>
        </a-marker>

        <a-box position="0 0 -10" color = "yellow" id = "box" ></a-box>
    </a-camera>

</a-scene>

<script>
    let box = document.getElementById('box')

    box.addEventListener('event_shake', e=>{
        let env = document.getElementById('env')
        let envs = ['contact', 'egypt', 'checkerboard', 'forest', 'goaland', 'yavapai', 'goldmine', 'threetowers', 'poison', 'arches', 'tron', 'japan', 'dream', 'volcano', 'starry', 'osiris']
        let random_element = envs[Math.floor(Math.random() * envs.length)];
        env.setAttribute('environment', 'preset: ' + random_element );
    });
</script>
</body>
</html>

